"use strict";function novoElemento(e,t){var r=document.createElement(e);return r.className=t,r}function Barreira(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.elemento=novoElemento("div","barreira");var t=novoElemento("div","borda"),r=novoElemento("div","corpo");this.elemento.appendChild(e?r:t),this.elemento.appendChild(e?t:r),this.setAltura=function(e){return r.style.height=e+"px"}}function ParDeBarreiras(r,n,e){var o=this;this.elemento=novoElemento("div","par-de-barreiras"),this.superior=new Barreira(!0),this.inferior=new Barreira(!1),this.elemento.appendChild(this.superior.elemento),this.elemento.appendChild(this.inferior.elemento),this.sortearAbertura=function(){var e=Math.random()*(r-n),t=r-n-e;o.superior.setAltura(e),o.inferior.setAltura(t)},this.getX=function(){return parseInt(o.elemento.style.left.split("px")[0])},this.setX=function(e){return o.elemento.style.left=e+"px"},this.getLargura=function(){return o.elemento.clientWidth},this.sortearAbertura(),this.setX(e)}function Barreiras(e,r,t,n,o){var i=this;this.pares=[new ParDeBarreiras(e,t,r),new ParDeBarreiras(e,t,r+n),new ParDeBarreiras(e,t,r+2*n),new ParDeBarreiras(e,t,r+3*n)];this.animar=function(){i.pares.forEach(function(e){e.setX(e.getX()-3),e.getX()<-e.getLargura()&&(e.setX(e.getX()+n*i.pares.length),e.sortearAbertura());var t=r/2;e.getX()+3>=t&&e.getX()<t&&o()})}}function Passaro(r){var n=this,o=!0;this.elemento=novoElemento("img","passaro"),this.elemento.src="../assets/imgs/passaro.png",this.getY=function(){return parseInt(n.elemento.style.bottom.split("px")[0])},this.setY=function(e){return n.elemento.style.bottom=e+"px"},window.onkeydown=function(e){return o=!0},window.onkeyup=function(e){return o=!1},this.animar=function(){var e=n.getY()+(o?8:-5),t=r-n.elemento.clientHeight;e<=0?n.setY(0):t<=e?n.setY(t):n.setY(e)},this.setY(r/2)}function Progresso(){var t=this;this.elemento=novoElemento("span","progresso"),this.atualizarPontos=function(e){t.elemento.innerHTML=e},this.atualizarPontos(0)}function estaoSobrepostos(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),o=r.left+r.width>=n.left&&n.left+n.width>=r.left,i=r.top+r.height>=n.top&&n.top+n.height>=r.top;return o&&i}function colidiu(n,e){var o=!1;return e.pares.forEach(function(e){if(!o){var t=e.superior.elemento,r=e.inferior.elemento;o=estaoSobrepostos(n.elemento,t)||estaoSobrepostos(n.elemento,r)}}),o}function lost(e){document.querySelector("[game-zone]").style.border="5px solid darkred",alert("You lost! Press F5 to try again."),clearInterval(e)}function FlappyBird(){var e=0,t=document.querySelector("[game-zone]"),r=t.clientHeight,n=t.clientWidth,o=new Progresso,i=new Barreiras(r,n,200,400,function(){return o.atualizarPontos(++e)}),a=new Passaro(r);t.appendChild(o.elemento),t.appendChild(a.elemento),i.pares.forEach(function(e){return t.appendChild(e.elemento)}),this.start=function(){var e=setInterval(function(){i.animar(),a.animar(),colidiu(a,i)&&lost(e)},20)}}(new FlappyBird).start();