"use strict";function novoElemento(e,t){var n=document.createElement(e);return n.className=t,n}function Barreira(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.elemento=novoElemento("div","barreira");var t=novoElemento("div","borda"),n=novoElemento("div","corpo");this.elemento.appendChild(e?n:t),this.elemento.appendChild(e?t:n),this.setAltura=function(e){return n.style.height=e+"px"}}function ParDeBarreiras(n,r,e){var o=this;this.elemento=novoElemento("div","par-de-barreiras"),this.superior=new Barreira(!0),this.inferior=new Barreira(!1),this.elemento.appendChild(this.superior.elemento),this.elemento.appendChild(this.inferior.elemento),this.sortearAbertura=function(){var e=Math.random()*(n-r),t=n-r-e;o.superior.setAltura(e),o.inferior.setAltura(t)},this.getX=function(){return parseInt(o.elemento.style.left.split("px")[0])},this.setX=function(e){return o.elemento.style.left=e+"px"},this.getLargura=function(){return o.elemento.clientWidth},this.sortearAbertura(),this.setX(e)}function Barreiras(e,n,t,r,o){var i=this;this.pares=[new ParDeBarreiras(e,t,n),new ParDeBarreiras(e,t,n+r),new ParDeBarreiras(e,t,n+2*r),new ParDeBarreiras(e,t,n+3*r)];this.animar=function(){i.pares.forEach(function(e){e.setX(e.getX()-3),e.getX()<-e.getLargura()&&(e.setX(e.getX()+r*i.pares.length),e.sortearAbertura());var t=n/2;e.getX()+3>=t&&e.getX()<t&&o()})}}function Passaro(n){var r=this,o=!0;this.elemento=novoElemento("img","passaro"),this.elemento.src="../assets/imgs/passaro.png",this.getY=function(){return parseInt(r.elemento.style.bottom.split("px")[0])},this.setY=function(e){return r.elemento.style.bottom=e+"px"},window.onkeydown=function(e){return o=!0},window.onkeyup=function(e){return o=!1},this.animar=function(){var e=r.getY()+(o?8:-5),t=n-r.elemento.clientHeight;e<=0?r.setY(0):t<=e?r.setY(t):r.setY(e)},this.setY(n/2)}function Progresso(){var t=this;this.elemento=novoElemento("span","progresso"),this.atualizarPontos=function(e){t.elemento.innerHTML=e},this.atualizarPontos(0)}function estaoSobrepostos(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=n.left+n.width>=r.left&&r.left+r.width>=n.left,i=n.top+n.height>=r.top&&r.top+r.height>=n.top;return o&&i}function colidiu(r,e){var o=!1;return e.pares.forEach(function(e){if(!o){var t=e.superior.elemento,n=e.inferior.elemento;o=estaoSobrepostos(r.elemento,t)||estaoSobrepostos(r.elemento,n)}}),o}function FlappyBird(){var e=0,t=document.querySelector("[game-zone]"),n=t.clientHeight,r=t.clientWidth,o=new Progresso,i=new Barreiras(n,r,200,400,function(){return o.atualizarPontos(++e)}),a=new Passaro(n);t.appendChild(o.elemento),t.appendChild(a.elemento),i.pares.forEach(function(e){return t.appendChild(e.elemento)}),this.start=function(){var e=setInterval(function(){i.animar(),a.animar(),colidiu(a,i)&&clearInterval(e)},20)}}(new FlappyBird).start();